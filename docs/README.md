# PostgreSQL Reviewer API Documentation

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ REST API —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ PostgreSQL –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.

## –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:8000
```

## API –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–µ API –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:

- **–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:** `v1`
- **–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å v1:** `/api/v1/`
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** `/api/` (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ v1)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- **Interactive Docs (Swagger):** `/api/v1/docs`
- **ReDoc:** `/api/v1/redoc`
- **OpenAPI Schema:** `/api/v1/openapi.json`
- **–í–µ—Ä—Å–∏–∏ API:** `/api/versions`

### üìñ [–ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏](./API_VERSIONING.md)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ —Å API –≤–µ—Ä—Å–∏—è–º–∏, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### üìä [–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á](./scheduler.md) - `/api/v1/scheduler/*`

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞

### üîó [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è](./connections.md) - `/api/v1/connections/*`

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö

### üìù [–õ–æ–≥–∏](./logs.md) - `/api/v1/logs/*`

–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤

### üìà [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](./monitoring.md) - `/api/v1/monitoring/*`

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∏—Å—Ç–µ–º—ã

### üîç [–ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–≤—å—é](./review.md) - `/api/v1/review/*`

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### ‚öôÔ∏è [–ü—Ä–∞–≤–∏–ª–∞](./rules.md) - `/api/v1/rules/*`

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞

### üõ† [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](./config.md) - `/api/v1/config/*`

–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**

```bash
curl -X POST http://localhost:8000/api/v1/connections/ \
  -H "Content-Type: application/json" \
  -d '{
    "name": "production-db",
    "vault_path": "database/postgresql/prod",
    "environment": "production",
    "description": "Production database connection",
    "tags": ["production", "main"],
    "host": "localhost",
    "port": 5432,
    "database": "proddb",
    "username": "postgres",
    "password": "password"
  }'
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∞–Ω–∞–ª–∏–∑–∞:**

```bash
curl -X POST http://localhost:8000/api/v1/scheduler/tasks/ \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Daily Config Check",
    "task_type": "config_check",
    "connection_id": 1,
    "cron_schedule": "0 2 * * *",
    "description": "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
  }'
```

3. **–ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏:**

```bash
curl -X POST http://localhost:8000/api/v1/scheduler/tasks/1/run
```

## –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã/–æ—Ç–≤–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç JSON —Ñ–æ—Ä–º–∞—Ç
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–æ—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã –æ—à–∏–±–æ–∫

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ API –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≤–µ—Ä—Å–∏–∏:

```bash
# –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
curl http://localhost:8000/api/v1/connections/

# –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
curl http://localhost:8000/api/connections/
```

## –°—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "data": { ... },
  "status": "success"
}
```

### –û—à–∏–±–∫–∞

```json
{
  "detail": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏",
  "status": "error"
}
```
